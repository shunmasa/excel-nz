(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"9ONQ":function(t,e,n){"use strict";n.r(e);var r=n("iVi/");function o(t,e){void 0===e&&(e={});var n=function(t){if(t&&"j"===t[0]&&":"===t[1])return t.substr(2);return t}(t);if(function(t,e){return"undefined"===typeof e&&(e=!t||"{"!==t[0]&&"["!==t[0]&&'"'!==t[0]),!e}(n,e.doNotParse))try{return JSON.parse(n)}catch(r){}return t}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=function(){function t(t,e){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(t,e){return"string"===typeof t?r.parse(t,e):"object"===typeof t&&null!==t?t:{}}(t,e),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"===typeof document&&"string"===typeof document.cookie})).catch((function(){}))}return t.prototype._updateBrowserValues=function(t){this.HAS_DOCUMENT_COOKIE&&(this.cookies=r.parse(document.cookie,t))},t.prototype._emitChange=function(t){for(var e=0;e<this.changeListeners.length;++e)this.changeListeners[e](t)},t.prototype.get=function(t,e,n){return void 0===e&&(e={}),this._updateBrowserValues(n),o(this.cookies[t],e)},t.prototype.getAll=function(t,e){void 0===t&&(t={}),this._updateBrowserValues(e);var n={};for(var r in this.cookies)n[r]=o(this.cookies[r],t);return n},t.prototype.set=function(t,e,n){var o;"object"===typeof e&&(e=JSON.stringify(e)),this.cookies=i(i({},this.cookies),((o={})[t]=e,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(t,e,n)),this._emitChange({name:t,value:e,options:n})},t.prototype.remove=function(t,e){var n=e=i(i({},e),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=i({},this.cookies),delete this.cookies[t],this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(t,"",n)),this._emitChange({name:t,value:void 0,options:e})},t.prototype.addChangeListener=function(t){this.changeListeners.push(t)},t.prototype.removeChangeListener=function(t){var e=this.changeListeners.indexOf(t);e>=0&&this.changeListeners.splice(e,1)},t}();e.default=s},C2QD:function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},FpJU:function(t,e,n){"use strict";n.d(e,"a",(function(){return B}));var r=n("o0o1"),o=n.n(r),i=n("HaE+"),s=n("1OyB"),c=n("vuIU");function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n("U8pU"),l=n("JX7q");function p(t,e){return!e||"object"!==Object(u.a)(e)&&"function"!==typeof e?Object(l.a)(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=n("rePB"),d=n("q1tI"),v=n.n(d),y=n("nOHt"),m=n.n(y),b=n("Ma5Y"),O=n.n(b),w=(n("Ff2n"),n("8Kt/"),n("VX74"),n("K/JX"),n("dMq0"),n("vcXL"),n("p46w"),n("1jQf")),g=n("RRgQ"),_=n("mrSG"),T=n("Yzoe"),E=function(t){function e(e){var n=t.call(this)||this;return e instanceof T.SubscriptionClient?n.subscriptionClient=e:n.subscriptionClient=new T.SubscriptionClient(e.uri,e.options,e.webSocketImpl),n}return Object(_.c)(e,t),e.prototype.request=function(t){return this.subscriptionClient.request(t)},e}(w.a),C=n("b0dj"),I=n("dQau"),S=n("qVdT"),N={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},x=function(t,e,n){var r=new Error(n);throw r.name="ServerError",r.response=t,r.statusCode=t.status,r.result=e,r},j=function(t,e){var n;try{n=JSON.stringify(t)}catch(o){var r=new S.a(2);throw r.parseError=o,r}return n},k=function(t){void 0===t&&(t={});var e=t.uri,n=void 0===e?"/graphql":e,r=t.fetch,o=t.includeExtensions,i=t.useGETForQueries,s=Object(_.f)(t,["uri","fetch","includeExtensions","useGETForQueries"]);!function(t){if(!t&&"undefined"===typeof fetch)throw new S.a(1)}(r),r||(r=fetch);var c={http:{includeExtensions:o},options:s.fetchOptions,credentials:s.credentials,headers:s.headers};return new w.a((function(t){var e=function(t,e){return t.getContext().uri||("function"===typeof e?e(t):e||"/graphql")}(t,n),o=t.getContext(),s={};if(o.clientAwareness){var a=o.clientAwareness,u=a.name,l=a.version;u&&(s["apollographql-client-name"]=u),l&&(s["apollographql-client-version"]=l)}var p,f=Object(_.a)({},s,o.headers),h={http:o.http,options:o.fetchOptions,credentials:o.credentials,headers:f},d=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=Object(_.a)({},e.options,{headers:e.headers,credentials:e.credentials}),i=e.http;n.forEach((function(t){o=Object(_.a)({},o,t.options,{headers:Object(_.a)({},o.headers,t.headers)}),t.credentials&&(o.credentials=t.credentials),i=Object(_.a)({},i,t.http)}));var s=t.operationName,c=t.extensions,a=t.variables,u=t.query,l={operationName:s,variables:a};return i.includeExtensions&&(l.extensions=c),i.includeQuery&&(l.query=Object(I.print)(u)),{options:o,body:l}}(t,N,c,h),v=d.options,y=d.body;if(!v.signal){var m=function(){if("undefined"===typeof AbortController)return{controller:!1,signal:!1};var t=new AbortController;return{controller:t,signal:t.signal}}(),b=m.controller,O=m.signal;(p=b)&&(v.signal=O)}if(i&&!t.query.definitions.some((function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation}))&&(v.method="GET"),"GET"===v.method){var g=function(t,e){var n=[],r=function(t,e){n.push(t+"="+encodeURIComponent(e))};"query"in e&&r("query",e.query);e.operationName&&r("operationName",e.operationName);if(e.variables){var o=void 0;try{o=j(e.variables)}catch(E){return{parseError:E}}r("variables",o)}if(e.extensions){var i=void 0;try{i=j(e.extensions)}catch(E){return{parseError:E}}r("extensions",i)}var s="",c=t,a=t.indexOf("#");-1!==a&&(s=t.substr(a),c=t.substr(0,a));var u=-1===c.indexOf("?")?"?":"&";return{newURI:c+u+n.join("&")+s}}(e,y),T=g.newURI,E=g.parseError;if(E)return Object(w.d)(E);e=T}else try{v.body=j(y)}catch(E){return Object(w.d)(E)}return new C.a((function(n){var o;return r(e,v).then((function(e){return t.setContext({response:e}),e})).then((o=t,function(t){return t.text().then((function(e){try{return JSON.parse(e)}catch(r){var n=r;return n.name="ServerParseError",n.response=t,n.statusCode=t.status,n.bodyText=e,Promise.reject(n)}})).then((function(e){return t.status>=300&&x(t,e,"Response not successful: Received status code "+t.status),Array.isArray(e)||e.hasOwnProperty("data")||e.hasOwnProperty("errors")||x(t,e,"Server response was missing for query '"+(Array.isArray(o)?o.map((function(t){return t.operationName})):o.operationName)+"'."),e}))})).then((function(t){return n.next(t),n.complete(),t})).catch((function(t){"AbortError"!==t.name&&(t.result&&t.result.errors&&t.result.data&&n.next(t.result),n.error(t))})),function(){p&&p.abort()}}))}))};var M=function(t){function e(e){return t.call(this,k(e).request)||this}return Object(_.c)(e,t),e}(w.a);v.a.createElement;var A=null,P=(new w.a((function(t,e){return t.setContext({headers:{authorization:A||null}}),t.authToken=A,e(t)})),new E({uri:"ws://localhost:4020/graphql",lazy:!0,options:{reconnect:!0,timeout:3e4}})),R=function(){var t=Object(i.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A=e||null,t.abrupt("return",A);case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),L=new M({uri:"http://localhost:4020/graphql",credentials:"same-origin",fetch:!1,fetchOptions:{mode:"cors"}});Object(w.e)((function(t){var e=t.query,n=Object(g.l)(e),r=n.kind,o=n.operation;return"OperationDefinition"===r&&"subscription"===o}),P,L);var Q=d.createElement;function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}var D=function(t){var e=O()(t),n=e.token,r=e.userId;return console.log("logs:",t),t.req&&!n?(t.res.writeHead(307,{Location:"/"}),void t.res.end()):(n||m.a.push("/"),{token:n,userId:r})},B=function(t){var e,n,r;return n=e=function(e){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,e);var n=q(r);function r(){return Object(s.a)(this,r),n.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return Q(t,this.props)}}],[{key:"getInitialProps",value:function(){var e=Object(i.a)(o.a.mark((function e(n){var r,i,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(n),i=r.token,s=r.userId,e.next=3,R(i);case 3:if(e.t0=t.getInitialProps,!e.t0){e.next=8;break}return e.next=7,t.getInitialProps(n);case 7:e.t0=e.sent;case 8:return c=e.t0,e.abrupt("return",U(U({},c),{},{token:i,userId:s}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(d.Component),Object(h.a)(e,"displayName","withAuthSync(".concat((r=t).displayName||r.name||"Component",")")),n}},HsqM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return null!==t&&"object"===typeof t}},JPdj:function(t,e,n){"use strict";n.r(e),function(t,r){var o,i=n("LjlU");o="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:r;var s=Object(i.a)(o);e.default=s}.call(this,n("yLpj"),n("3UD+")(t))},LjlU:function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"===typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",(function(){return r}))},Ma5Y:function(t,e,n){var r=n("9ONQ");r=r.default||r,t.exports=function(t,e){var n=t.req&&t.req.headers&&t.req.headers.cookie;return new r(n).getAll(e)}},Nj7N:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){throw new Error("Static Class")}return t.GQL_CONNECTION_INIT="connection_init",t.GQL_CONNECTION_ACK="connection_ack",t.GQL_CONNECTION_ERROR="connection_error",t.GQL_CONNECTION_KEEP_ALIVE="ka",t.GQL_CONNECTION_TERMINATE="connection_terminate",t.GQL_START="start",t.GQL_DATA="data",t.GQL_ERROR="error",t.GQL_COMPLETE="complete",t.GQL_STOP="stop",t.SUBSCRIPTION_START="subscription_start",t.SUBSCRIPTION_DATA="subscription_data",t.SUBSCRIPTION_SUCCESS="subscription_success",t.SUBSCRIPTION_FAIL="subscription_fail",t.SUBSCRIPTION_END="subscription_end",t.INIT="init",t.INIT_SUCCESS="init_success",t.INIT_FAIL="init_fail",t.KEEP_ALIVE="keepalive",t}();e.default=r},Qcyp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"string"===typeof t}},SYjR:function(t,e,n){"use strict";n.r(e),n.d(e,"getOperationAST",(function(){return o}));var r=n("/jXB");function o(t,e){for(var n=null,o=0,i=t.definitions;o<i.length;o++){var s,c=i[o];if(c.kind===r.a.OPERATION_DEFINITION)if(null==e){if(n)return null;n=c}else if((null===(s=c.name)||void 0===s?void 0:s.value)===e)return c}return n}},Yzoe:function(t,e,n){"use strict";(function(t){var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(e){i(e)}}function c(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,o++)r[o]=i[s];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.SubscriptionClient=void 0;var c="undefined"!==typeof t?t:"undefined"!==typeof window?window:{},a=c.WebSocket||c.MozWebSocket,u=n("C2QD"),l=n("uhBA"),p=n("Qcyp"),f=n("HsqM"),h=n("dQau"),d=n("SYjR"),v=n("JPdj"),y=n("yiBj"),m=n("jZto"),b=n("Nj7N"),O=function(){function t(t,e,n,r){var o=e||{},i=o.connectionCallback,s=void 0===i?void 0:i,c=o.connectionParams,p=void 0===c?{}:c,f=o.minTimeout,h=void 0===f?m.MIN_WS_TIMEOUT:f,d=o.timeout,v=void 0===d?m.WS_TIMEOUT:d,b=o.reconnect,O=void 0!==b&&b,w=o.reconnectionAttempts,g=void 0===w?1/0:w,_=o.lazy,T=void 0!==_&&_,E=o.inactivityTimeout,C=void 0===E?0:E,I=o.wsOptionArguments,S=void 0===I?[]:I;if(this.wsImpl=n||a,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=r||y.GRAPHQL_WS,this.connectionCallback=s,this.url=t,this.operations={},this.nextOperationId=0,this.minWsTimeout=h,this.wsTimeout=v,this.unsentMessagesQueue=[],this.reconnect=O,this.reconnecting=!1,this.reconnectionAttempts=g,this.lazy=!!T,this.inactivityTimeout=C,this.closedByUser=!1,this.backoff=new u({jitter:.5}),this.eventEmitter=new l.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(p),this.wsOptionArguments=S,this.lazy||this.connect()}return Object.defineProperty(t.prototype,"status",{get:function(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),t.prototype.close=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=e,t&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,b.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),t||this.tryReconnect())},t.prototype.request=function(t){var e,n,r=this.getObserver.bind(this),o=this.executeOperation.bind(this),i=this.unsubscribe.bind(this);return this.clearInactivityTimeout(),(e={})[v.default]=function(){return this},e.subscribe=function(e,s,c){var a=r(e,s,c);return n=o(t,(function(t,e){null===t&&null===e?a.complete&&a.complete():t?a.error&&a.error(t[0]):a.next&&a.next(e)})),{unsubscribe:function(){n&&(i(n),n=null)}}},e},t.prototype.on=function(t,e,n){var r=this.eventEmitter.on(t,e,n);return function(){r.off(t,e,n)}},t.prototype.onConnected=function(t,e){return this.on("connected",t,e)},t.prototype.onConnecting=function(t,e){return this.on("connecting",t,e)},t.prototype.onDisconnected=function(t,e){return this.on("disconnected",t,e)},t.prototype.onReconnected=function(t,e){return this.on("reconnected",t,e)},t.prototype.onReconnecting=function(t,e){return this.on("reconnecting",t,e)},t.prototype.onError=function(t,e){return this.on("error",t,e)},t.prototype.unsubscribeAll=function(){var t=this;Object.keys(this.operations).forEach((function(e){t.unsubscribe(e)}))},t.prototype.applyMiddlewares=function(t){var e=this;return new Promise((function(n,r){!function(e,o){var i=function(s){if(s)r(s);else if(e.length>0){var c=e.shift();c&&c.applyMiddleware.apply(o,[t,i])}else n(t)};i()}(s(e.middlewares),e)}))},t.prototype.use=function(t){var e=this;return t.map((function(t){if("function"!==typeof t.applyMiddleware)throw new Error("Middleware must implement the applyMiddleware function.");e.middlewares.push(t)})),this},t.prototype.getConnectionParams=function(t){return function(){return new Promise((function(e,n){if("function"===typeof t)try{return e(t.call(null))}catch(r){return n(r)}e(t)}))}},t.prototype.executeOperation=function(t,e){var n=this;null===this.client&&this.connect();var r=this.generateOperationId();return this.operations[r]={options:t,handler:e},this.applyMiddlewares(t).then((function(t){n.checkOperationOptions(t,e),n.operations[r]&&(n.operations[r]={options:t,handler:e},n.sendMessage(r,b.default.GQL_START,t))})).catch((function(t){n.unsubscribe(r),e(n.formatErrors(t))})),r},t.prototype.getObserver=function(t,e,n){return"function"===typeof t?{next:function(e){return t(e)},error:function(t){return e&&e(t)},complete:function(){return n&&n()}}:t},t.prototype.createMaxConnectTimeGenerator=function(){var t=this.minWsTimeout,e=this.wsTimeout;return new u({min:t,max:e,factor:1.2})},t.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},t.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},t.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},t.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},t.prototype.setInactivityTimeout=function(){var t=this;this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout((function(){0===Object.keys(t.operations).length&&t.close()}),this.inactivityTimeout))},t.prototype.checkOperationOptions=function(t,e){var n=t.query,r=t.variables,o=t.operationName;if(!n)throw new Error("Must provide a query.");if(!e)throw new Error("Must provide an handler.");if(!p.default(n)&&!d.getOperationAST(n,o)||o&&!p.default(o)||r&&!f.default(r))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},t.prototype.buildMessage=function(t,e,n){return{id:t,type:e,payload:n&&n.query?r(r({},n),{query:"string"===typeof n.query?n.query:h.print(n.query)}):n}},t.prototype.formatErrors=function(t){return Array.isArray(t)?t:t&&t.errors?this.formatErrors(t.errors):t&&t.message?[t]:[{name:"FormatedError",message:"Unknown error",originalError:t}]},t.prototype.sendMessage=function(t,e,n){this.sendMessageRaw(this.buildMessage(t,e,n))},t.prototype.sendMessageRaw=function(t){switch(this.status){case this.wsImpl.OPEN:var e=JSON.stringify(t);try{JSON.parse(e)}catch(n){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+t))}this.client.send(e);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(t);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(t)))}},t.prototype.generateOperationId=function(){return String(++this.nextOperationId)},t.prototype.tryReconnect=function(){var t=this;if(this.reconnect&&!(this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach((function(e){t.unsentMessagesQueue.push(t.buildMessage(e,b.default.GQL_START,t.operations[e].options))})),this.reconnecting=!0),this.clearTryReconnectTimeout();var e=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout((function(){t.connect()}),e)}},t.prototype.flushUnsentMessagesQueue=function(){var t=this;this.unsentMessagesQueue.forEach((function(e){t.sendMessageRaw(e)})),this.unsentMessagesQueue=[]},t.prototype.checkConnection=function(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)},t.prototype.checkMaxConnectTimeout=function(){var t=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout((function(){t.status!==t.wsImpl.OPEN&&(t.reconnecting=!0,t.close(!1,!0))}),this.maxConnectTimeGenerator.duration())},t.prototype.connect=function(){var t,e=this;this.client=new((t=this.wsImpl).bind.apply(t,s([void 0,this.url,this.wsProtocols],this.wsOptionArguments))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return o(e,void 0,void 0,(function(){var t,e;return i(this,(function(n){switch(n.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return t=n.sent(),this.sendMessage(void 0,b.default.GQL_CONNECTION_INIT,t),this.flushUnsentMessagesQueue(),[3,4];case 3:return e=n.sent(),this.sendMessage(void 0,b.default.GQL_CONNECTION_ERROR,e),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}}))}))},this.client.onclose=function(){e.closedByUser||e.close(!1,!1)},this.client.onerror=function(t){e.eventEmitter.emit("error",t)},this.client.onmessage=function(t){var n=t.data;e.processReceivedData(n)}},t.prototype.processReceivedData=function(t){var e,n;try{n=(e=JSON.parse(t)).id}catch(c){throw new Error("Message must be JSON-parseable. Got: "+t)}if(-1===[b.default.GQL_DATA,b.default.GQL_COMPLETE,b.default.GQL_ERROR].indexOf(e.type)||this.operations[n])switch(e.type){case b.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(e.payload);break;case b.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",e.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case b.default.GQL_COMPLETE:var o=this.operations[n].handler;delete this.operations[n],o.call(this,null,null);break;case b.default.GQL_ERROR:this.operations[n].handler(this.formatErrors(e.payload),null),delete this.operations[n];break;case b.default.GQL_DATA:var i=e.payload.errors?r(r({},e.payload),{errors:this.formatErrors(e.payload.errors)}):e.payload;this.operations[n].handler(null,i);break;case b.default.GQL_CONNECTION_KEEP_ALIVE:var s="undefined"===typeof this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,s&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(n)},t.prototype.unsubscribe=function(t){this.operations[t]&&(delete this.operations[t],this.setInactivityTimeout(),this.sendMessage(t,b.default.GQL_STOP,void 0))},t}();e.SubscriptionClient=O}).call(this,n("yLpj"))},"iVi/":function(t,e,n){"use strict";e.parse=function(t,e){if("string"!==typeof t)throw new TypeError("argument str must be a string");for(var n={},o=e||{},s=t.split(i),a=o.decode||r,u=0;u<s.length;u++){var l=s[u],p=l.indexOf("=");if(!(p<0)){var f=l.substr(0,p).trim(),h=l.substr(++p,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==n[f]&&(n[f]=c(h,a))}}return n},e.serialize=function(t,e,n){var r=n||{},i=r.encode||o;if("function"!==typeof i)throw new TypeError("option encode is invalid");if(!s.test(t))throw new TypeError("argument name is invalid");var c=i(e);if(c&&!s.test(c))throw new TypeError("argument val is invalid");var a=t+"="+c;if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(r.domain){if(!s.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!s.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if("function"!==typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(a+="; HttpOnly");r.secure&&(a+="; Secure");if(r.sameSite){switch("string"===typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a};var r=decodeURIComponent,o=encodeURIComponent,i=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function c(t,e){try{return e(t)}catch(n){return t}}},jZto:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WS_TIMEOUT=e.MIN_WS_TIMEOUT=void 0;e.MIN_WS_TIMEOUT=1e3;e.WS_TIMEOUT=3e4},uhBA:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function c(t,e,n,r,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var c=new s(n,r||t,i),a=o?o+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],c]:t._events[a].push(c):(t._events[a]=c,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},u.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,r,i,s){var c=o?o+t:t;if(!this._events[c])return!1;var a,u,l=this._events[c],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,s),!0}for(u=1,a=new Array(p-1);u<p;u++)a[u-1]=arguments[u];l.fn.apply(l.context,a)}else{var f,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),p){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,r);break;default:if(!a)for(f=1,a=new Array(p-1);f<p;f++)a[f-1]=arguments[f];l[u].fn.apply(l[u].context,a)}}return!0},u.prototype.on=function(t,e,n){return c(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return c(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||a(this,i);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==e||r&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,t.exports=u},vcXL:function(t,e,n){"use strict";var r=self.fetch.bind(self);t.exports=r,t.exports.default=t.exports},yiBj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GRAPHQL_SUBSCRIPTIONS=e.GRAPHQL_WS=void 0;e.GRAPHQL_WS="graphql-ws";e.GRAPHQL_SUBSCRIPTIONS="graphql-subscriptions"}}]);